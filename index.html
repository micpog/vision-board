<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Vision Board</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            width: 100vw;
            height: 100vh;
            overflow: hidden;
            background: #000;
        }

        #imageContainer {
            width: 100%;
            height: 100%;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #currentImage {
            max-width: 100%;
            max-height: 100%;
            object-fit: contain;
            opacity: 0;
            transition: opacity 0.5s ease-in-out;
        }

        #currentImage.loaded {
            opacity: 1;
        }
    </style>
</head>
<body>
    <div id="imageContainer">
        <img id="currentImage" alt="Vision Board Image">
    </div>

    <script>
        const IMAGE_INTERVAL = 5000; // 5 seconds in milliseconds
        const IMAGES_DIR = 'images/';
        
        // Image filenames - auto-generated by generate-images.js
        // DO NOT EDIT MANUALLY - run generate-images.js after adding images
        const imageFiles = [            'clay-banks-_wkd7XBRfU4-unsplash.jpg',
            'ethan-rougon-BA712fvs2-Q-unsplash.jpg',
            'saas_app.png',
            'yoo-hoo-WVfpeZzYMMg-unsplash.jpg'];

        let currentIndex = 0;
        let shuffledImages = [];
        const imageContainer = document.getElementById('imageContainer');
        const currentImage = document.getElementById('currentImage');

        // Fisher-Yates shuffle algorithm
        function shuffleArray(array) {
            const shuffled = [...array];
            for (let i = shuffled.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [shuffled[i], shuffled[j]] = [shuffled[j], shuffled[i]];
            }
            return shuffled;
        }

        // Preload all images
        function preloadImages(imagePaths) {
            return Promise.all(
                imagePaths.map((path) => {
                    return new Promise((resolve, reject) => {
                        const img = new Image();
                        img.onload = () => resolve(img);
                        img.onerror = () => reject(new Error(`Failed to load ${path}`));
                        img.src = path;
                    });
                })
            );
        }

        // Display next image
        function showNextImage() {
            if (shuffledImages.length === 0) {
                console.error('No images to display');
                return;
            }

            const imagePath = shuffledImages[currentIndex];
            currentImage.src = imagePath;
            currentImage.classList.add('loaded');

            currentIndex = (currentIndex + 1) % shuffledImages.length;
        }

        // Initialize the vision board
        async function init() {
            if (imageFiles.length === 0) {
                console.warn('No images found. Add images to the images/ directory and run generate-images.js');
                return;
            }

            // Build full image paths
            const imagePaths = imageFiles.map(file => IMAGES_DIR + file);

            // Shuffle images randomly
            shuffledImages = shuffleArray(imagePaths);

            // Preload all images
            try {
                await preloadImages(imagePaths);
            } catch (error) {
                console.error('Error preloading images:', error);
            }

            // Display first image immediately
            showNextImage();

            // Set up interval for subsequent images
            setInterval(showNextImage, IMAGE_INTERVAL);
        }

        // Start on page load
        window.addEventListener('load', init);
    </script>
</body>
</html>
